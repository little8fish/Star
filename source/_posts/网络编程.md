---
title: 网络编程
abbrlink: f6491cfb
date: 2023-03-03 15:37:04
tags:
---
1. epoll_create(int) 参数只有0和1的区别
2. epoll_ctl() 添加删除
3. epoll_wait() 
4. epoll原理 做网络离不开epoll
5. epoll的6种做法 1. 单线程 2. 网络io多线程 accept单线程 多线程处理recv/send 3. 多线程处理accept 多线程处理recv/send 4. 多线程epoll_wait 不区分accept与recv/send 支持多核 5. 多进程epoll_wait 不区分accept与recv/send 6. 主进程accept 子进程recv/send  5和6多进程适合session独立 前后不关联
6. 水平触发 边缘触发 如何选择 
7. 不要1个线程共用多个fd  惊醒
8. reactor不用跟多线程、多线程联系 
9. reactor 封装好的epoll
10. 如果使用边缘触发模式，I/O 事件发生时只会通知一次，而且我们不知道到底能读写多少数据，所以在收到通知后应尽可能地读写数据，以免错失读写的机会。因此，我们会循环从文件描述符读写数据，那么如果文件描述符是阻塞的，没有数据可读写时，进程会阻塞在读写函数那里，程序就没办法继续往下执行。所以，边缘触发模式一般和非阻塞 I/O 搭配使用，程序会一直执行 I/O 操作，直到系统调用（如 read 和 write）返回错误，错误类型为 EAGAIN 或 EWOULDBLOCK。
11. epoll 因为在内核维护了红黑树